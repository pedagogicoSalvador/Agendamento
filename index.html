<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Agendamento - Professores</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        function TeacherSchedulingSystem() {
          const subjects = {
            "L√≠ngua Portuguesa e Reda√ß√£o": {
              icon: "üìö",
              color: "blue",
              teachers: [
                { id: 1, name: "Prof. Ana Silva", specialties: ["Literatura", "Gram√°tica", "Reda√ß√£o"] },
                { id: 2, name: "Prof. Carlos Santos", specialties: ["Reda√ß√£o", "Interpreta√ß√£o"] },
                { id: 3, name: "Prof. Maria Oliveira", specialties: ["Literatura Cl√°ssica", "Produ√ß√£o Textual"] }
              ]
            },
            "Matem√°tica": {
              icon: "üßÆ",
              color: "green",
              teachers: [
                { id: 4, name: "Prof. Jo√£o Pereira", specialties: ["√Ålgebra", "Geometria"] },
                { id: 5, name: "Prof. Fernanda Lima", specialties: ["C√°lculo", "Estat√≠stica"] },
                { id: 6, name: "Prof. Roberto Costa", specialties: ["Trigonometria", "Fun√ß√µes"] }
              ]
            },
            "Ci√™ncias": {
              icon: "üî¨",
              color: "purple",
              teachers: [
                { id: 7, name: "Prof. Luciana Moraes", specialties: ["Biologia", "Qu√≠mica"] },
                { id: 8, name: "Prof. Pedro Alves", specialties: ["F√≠sica", "Qu√≠mica"] },
                { id: 9, name: "Prof. Camila Rocha", specialties: ["Biologia", "Meio Ambiente"] }
              ]
            },
            "Espanhol": {
              icon: "üá™üá∏",
              color: "red",
              teachers: [
                { id: 10, name: "Prof. Elena Rodriguez", specialties: ["Conversa√ß√£o", "Gram√°tica"] },
                { id: 11, name: "Prof. Miguel Santos", specialties: ["Literatura Hisp√¢nica", "Cultura"] }
              ]
            },
            "Ingl√™s": {
              icon: "üá∫üá∏",
              color: "indigo",
              teachers: [
                { id: 12, name: "Prof. Sarah Johnson", specialties: ["Conversa√ß√£o", "Grammar"] },
                { id: 13, name: "Prof. Robert Brown", specialties: ["Literature", "Writing"] },
                { id: 14, name: "Prof. Amanda Wilson", specialties: ["Business English", "TOEFL"] }
              ]
            },
            "Hist√≥ria/Filosofia/Sociologia": {
              icon: "üèõÔ∏è",
              color: "yellow",
              teachers: [
                { id: 15, name: "Prof. Jos√© Hist√≥ria", specialties: ["Hist√≥ria Geral", "Hist√≥ria do Brasil"] },
                { id: 16, name: "Prof. Marcos Filosofia", specialties: ["Filosofia Antiga", "√âtica"] },
                { id: 17, name: "Prof. Laura Sociologia", specialties: ["Sociologia Contempor√¢nea", "Antropologia"] }
              ]
            },
            "Geografia": {
              icon: "üåç",
              color: "teal",
              teachers: [
                { id: 18, name: "Prof. Ricardo Geo", specialties: ["Geografia F√≠sica", "Cartografia"] },
                { id: 19, name: "Prof. Marina Terra", specialties: ["Geografia Humana", "Geopol√≠tica"] }
              ]
            },
            "Educa√ß√£o F√≠sica": {
              icon: "‚öΩ",
              color: "orange",
              teachers: [
                { id: 20, name: "Prof. Diego Esporte", specialties: ["Futebol", "Basquete", "Atletismo"] },
                { id: 21, name: "Prof. Carla Fitness", specialties: ["Gin√°stica", "Dan√ßa", "Yoga"] }
              ]
            },
            "Artes": {
              icon: "üé®",
              color: "pink",
              teachers: [
                { id: 22, name: "Prof. Helena Arte", specialties: ["Pintura", "Desenho"] },
                { id: 23, name: "Prof. Bruno M√∫sica", specialties: ["M√∫sica", "Teatro"] }
              ]
            },
            "Educa√ß√£o Tecnol√≥gica": {
              icon: "üíª",
              color: "gray",
              teachers: [
                { id: 24, name: "Prof. Tech Silva", specialties: ["Programa√ß√£o", "Rob√≥tica"] },
                { id: 25, name: "Prof. Digital Costa", specialties: ["Design", "Inform√°tica"] }
              ]
            },
            "Biologia": {
              icon: "üß¨",
              color: "green",
              teachers: [
                { id: 26, name: "Prof. Bio Santos", specialties: ["Gen√©tica", "Ecologia"] },
                { id: 27, name: "Prof. Vida Lima", specialties: ["Anatomia", "Bot√¢nica"] }
              ]
            },
            "Literatura": {
              icon: "üìñ",
              color: "purple",
              teachers: [
                { id: 28, name: "Prof. Letras Souza", specialties: ["Literatura Brasileira", "Poesia"] },
                { id: 29, name: "Prof. Verso Alves", specialties: ["Literatura Mundial", "Drama"] }
              ]
            },
            "F√≠sica": {
              icon: "‚öõÔ∏è",
              color: "blue",
              teachers: [
                { id: 30, name: "Prof. Newton Physics", specialties: ["Mec√¢nica", "Eletromagnetismo"] },
                { id: 31, name: "Prof. Einstein Teoria", specialties: ["F√≠sica Moderna", "Termodin√¢mica"] }
              ]
            }
          };

          const generateTimeSlots = () => {
            const slots = [];
            let startTime = new Date();
            startTime.setHours(18, 30, 0, 0);
            
            const endTime = new Date();
            endTime.setHours(19, 50, 0, 0);
            
            while (startTime <= endTime) {
              const timeString = startTime.toLocaleTimeString('pt-BR', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: false 
              });
              slots.push(timeString);
              startTime.setMinutes(startTime.getMinutes() + 10);
            }
            
            return slots;
          };

          const timeSlots = generateTimeSlots();

          const [currentScreen, setCurrentScreen] = useState("home");
          const [selectedSubject, setSelectedSubject] = useState("");
          const [selectedTeacher, setSelectedTeacher] = useState(null);
          const [teacherBookings, setTeacherBookings] = useState(new Map());
          const [message, setMessage] = useState("");
          const [messageType, setMessageType] = useState("");
          const [isAdminMode, setIsAdminMode] = useState(false);
          const [adminPassword, setAdminPassword] = useState("");

          const [parentName, setParentName] = useState("");
          const [studentName, setStudentName] = useState("");
          const [email, setEmail] = useState("");
          const [selectedSlot, setSelectedSlot] = useState("");

          const showMessage = (text, type) => {
            setMessage(text);
            setMessageType(type);
            setTimeout(() => {
              setMessage("");
              setMessageType("");
            }, 4000);
          };

          const getTeacherBookings = (teacherId) => {
            return teacherBookings.get(teacherId) || new Map();
          };

          const getBookedSlots = (teacherId) => {
            const bookings = getTeacherBookings(teacherId);
            return new Set(Array.from(bookings.keys()));
          };

          const isSlotAvailable = (slot, teacherId) => {
            const bookedSlots = getBookedSlots(teacherId);
            return !bookedSlots.has(slot);
          };

          const goToAdmin = () => setCurrentScreen("admin");
          const goToSubjects = () => setCurrentScreen("subjects");
          
          const goToTeachers = (subject) => {
            setSelectedSubject(subject);
            setCurrentScreen("teachers");
          };

          const goToBooking = (teacher) => {
            setSelectedTeacher(teacher);
            setCurrentScreen("booking");
            setParentName("");
            setStudentName("");
            setEmail("");
            setSelectedSlot("");
            setMessage("");
            setMessageType("");
          };

          const goBack = () => {
            if (currentScreen === "booking") {
              setCurrentScreen("teachers");
            } else if (currentScreen === "teachers") {
              setCurrentScreen("subjects");
            } else if (currentScreen === "subjects") {
              setCurrentScreen("home");
            }
          };

          const handleAdminLogin = () => {
            if (adminPassword === "admin123") {
              setIsAdminMode(true);
              setCurrentScreen("adminPanel");
              setAdminPassword("");
              showMessage("Acesso administrativo concedido!", "success");
            } else {
              showMessage("Senha incorreta. Acesso negado.", "error");
              setAdminPassword("");
            }
          };

          const handleBooking = () => {
            const teacherId = selectedTeacher?.id;
            
            if (!teacherId) return;
            
            if (!parentName.trim()) {
              showMessage("Por favor, insira o nome do respons√°vel.", "error");
              return;
            }

            if (!studentName.trim()) {
              showMessage("Por favor, insira o nome do estudante.", "error");
              return;
            }

            if (!email.trim()) {
              showMessage("Por favor, insira o email para contato.", "error");
              return;
            }

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
              showMessage("Por favor, insira um email v√°lido.", "error");
              return;
            }

            if (!selectedSlot) {
              showMessage("Por favor, selecione um hor√°rio.", "error");
              return;
            }

            const currentBookings = getTeacherBookings(teacherId);
            const existingBooking = Array.from(currentBookings.values()).find(booking => 
              booking.email.toLowerCase() === email.toLowerCase()
            );
            
            if (existingBooking) {
              showMessage(`Este email j√° tem um agendamento √†s ${existingBooking.time} para o estudante ${existingBooking.studentName} com ${selectedTeacher.name}.`, "error");
              return;
            }

            if (!isSlotAvailable(selectedSlot, teacherId)) {
              showMessage("Este hor√°rio n√£o est√° mais dispon√≠vel. Selecione outro.", "error");
              return;
            }

            const bookingData = {
              parentName: parentName.trim(),
              studentName: studentName.trim(),
              email: email.trim().toLowerCase(),
              time: selectedSlot,
              bookingDate: new Date().toLocaleDateString('pt-BR'),
              teacher: selectedTeacher.name,
              subject: selectedSubject
            };

            const updatedBookings = new Map([...currentBookings, [selectedSlot, bookingData]]);
            setTeacherBookings(prev => new Map([...prev, [teacherId, updatedBookings]]));
            
            showMessage(`Agendamento confirmado! ${parentName} agendou √†s ${selectedSlot} para o estudante ${studentName} com ${selectedTeacher.name}.`, "success");
            
            setParentName("");
            setStudentName("");
            setEmail("");
            setSelectedSlot("");
          };

          const exportAllBookings = () => {
            const worksheetData = [
              ['Professor', 'Disciplina', 'Nome do Respons√°vel', 'Nome do Estudante', 'Email', 'Hor√°rio', 'Data de Agendamento']
            ];
            
            Array.from(teacherBookings.entries()).forEach(([teacherId, bookings]) => {
              Array.from(bookings.values()).forEach((booking) => {
                worksheetData.push([
                  booking.teacher,
                  booking.subject,
                  booking.parentName,
                  booking.studentName,
                  booking.email,
                  booking.time,
                  booking.bookingDate
                ]);
              });
            });

            const csvContent = worksheetData.map(row => 
              row.map(cell => `"${cell}"`).join(',')
            ).join('\n');

            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `todos_agendamentos_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showMessage('Relat√≥rio completo exportado com sucesso!', 'success');
          };

          if (currentScreen === "home") {
            return React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-indigo-50 to-blue-100 p-6" },
              React.createElement('div', { className: "max-w-6xl mx-auto" },
                React.createElement('div', { className: "bg-white rounded-2xl shadow-xl p-8 text-center" },
                  React.createElement('div', { className: "mb-8" },
                    React.createElement('div', { className: "text-6xl mb-4" }, "üéì"),
                    React.createElement('h1', { className: "text-4xl font-bold text-gray-800 mb-4" }, "Sistema de Agendamento"),
                    React.createElement('p', { className: "text-xl text-gray-600 mb-2" }, "Reuni√µes Pedag√≥gicas com Professores"),
                    React.createElement('p', { className: "text-gray-500" }, "Hor√°rios dispon√≠veis: 18:30 √†s 19:50 (intervalos de 10 minutos)")
                  ),
                  React.createElement('div', { className: "flex gap-4 justify-center mb-8" },
                    React.createElement('button', {
                      onClick: goToSubjects,
                      className: "px-8 py-4 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-lg font-medium"
                    }, "Come√ßar Agendamento"),
                    React.createElement('button', {
                      onClick: goToAdmin,
                      className: "px-6 py-4 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-lg font-medium"
                    }, "‚öôÔ∏è √Årea Administrativa")
                  ),
                  React.createElement('div', { className: "grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" },
                    Object.entries(subjects).map(([subject, data]) => 
                      React.createElement('div', { 
                        key: subject, 
                        className: "bg-gray-50 rounded-lg p-4" 
                      },
                        React.createElement('div', { className: "text-2xl mb-2 text-center" }, data.icon),
                        React.createElement('h3', { className: "text-sm font-semibold text-gray-800 mb-1 text-center" }, subject),
                        React.createElement('p', { className: "text-gray-600 text-xs text-center" }, `${data.teachers.length} prof(s)`)
                      )
                    )
                  )
                )
              )
            );
          }

          if (currentScreen === "subjects") {
            return React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-indigo-50 to-blue-100 p-6" },
              React.createElement('div', { className: "max-w-6xl mx-auto" },
                React.createElement('div', { className: "bg-white rounded-2xl shadow-xl p-8" },
                  React.createElement('div', { className: "flex items-center mb-8" },
                    React.createElement('button', {
                      onClick: goBack,
                      className: "mr-4 p-2 text-gray-600 hover:text-gray-800 transition-colors"
                    }, "‚Üê Voltar"),
                    React.createElement('h1', { className: "text-3xl font-bold text-gray-800" }, "Selecione a Disciplina")
                  ),
                  React.createElement('div', { className: "grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" },
                    Object.entries(subjects).map(([subject, data]) =>
                      React.createElement('button', {
                        key: subject,
                        onClick: () => goToTeachers(subject),
                        className: "bg-blue-50 border-2 border-blue-200 rounded-xl p-4 hover:bg-blue-100 transition-colors text-left"
                      },
                        React.createElement('div', { className: "text-3xl mb-2" }, data.icon),
                        React.createElement('h2', { className: "text-lg font-bold text-gray-800 mb-1" }, subject),
                        React.createElement('p', { className: "text-gray-600 text-sm" }, `${data.teachers.length} professores`)
                      )
                    )
                  )
                )
              )
            );
          }

          if (currentScreen === "admin") {
            return React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6" },
              React.createElement('div', { className: "max-w-md mx-auto" },
                React.createElement('div', { className: "bg-white rounded-2xl shadow-xl p-8" },
                  React.createElement('div', { className: "flex items-center mb-8" },
                    React.createElement('button', {
                      onClick: () => setCurrentScreen("home"),
                      className: "mr-4 p-2 text-gray-600 hover:text-gray-800 transition-colors"
                    }, "‚Üê Voltar"),
                    React.createElement('div', { className: "flex-1 text-center" },
                      React.createElement('div', { className: "text-4xl mb-3" }, "üõ°Ô∏è"),
                      React.createElement('h1', { className: "text-2xl font-bold text-gray-800" }, "√Årea Administrativa")
                    )
                  ),
                  React.createElement('div', { className: "mb-6" },
                    React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "Senha de Acesso"),
                    React.createElement('input', {
                      type: "password",
                      value: adminPassword,
                      onChange: (e) => setAdminPassword(e.target.value),
                      onKeyPress: (e) => e.key === 'Enter' && handleAdminLogin(),
                      placeholder: "Digite a senha administrativa",
                      className: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    })
                  ),
                  React.createElement('button', {
                    onClick: handleAdminLogin,
                    className: "w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"
                  }, "Acessar Painel Administrativo"),
                  message && React.createElement('div', {
                    className: `mt-4 p-3 rounded-lg flex items-center text-sm ${
                      messageType === 'success' 
                        ? 'bg-green-50 text-green-800 border border-green-200' 
                        : 'bg-red-50 text-red-800 border border-red-200'
                    }`
                  }, message)
                )
              )
            );
          }

          // Adicione as outras telas aqui seguindo o mesmo padr√£o...
          return React.createElement('div', {}, "Tela em desenvolvimento");
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(TeacherSchedulingSystem));
    </script>
</body>
</html>